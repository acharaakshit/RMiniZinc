--- 
warnings_are_errors: false
jobs:
  include:
    - os: linux
      language: R
      sudo: required
      before_install:
        - cd /usr/local/lib;
        - sudo git clone https://github.com/MiniZinc/libminizinc.git; 
        - cd libminizinc/;
        - sudo sed -i '3 i set(CMAKE_POSITION_INDEPENDENT_CODE ON)' CMakeLists.txt;
        - sudo apt-get install build-essential cmake;
        - sudo -E cmake CMakeLists.txt;
        - sudo make;
        - sudo make install;
      cache: packages
    - os: osx
      language: R
      before_install:
        - wget https://github.com/MiniZinc/MiniZincIDE/releases/download/2.4.3/MiniZincIDE-2.4.3-bundled.dmg ;
        - hdiutil mount MiniZincIDE-2.4.3-bundled.dmg ;
        - sudo cp -R '''/Volumes/MiniZinc IDE 2.4.3 (bundled)/MiniZincIDE.app''' /Applications ;
        - hdiutil unmount '''/Volumes/MiniZinc IDE 2.4.3 (bundled)/''' ;
        - export PATH=/Applications/MiniZincIDE.app/Contents/Resources:$PATH ;
        - echo PATH ;
  allow_failures:
    os: osx
   
